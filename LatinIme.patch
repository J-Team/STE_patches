From c47bcceacf7a79b120482ad868f4ea8cb1769bfe Mon Sep 17 00:00:00 2001
From: Danny Baumann <dannybaumann@web.de>
Date: Fri, 2 Aug 2013 13:31:53 +0200
Subject: [PATCH] Fix LatinIME crashing if JNI lib without gesture support is
 installed.

Change-Id: I60292a8e272d484e1d4a4407ddceeac863d6d70e
---
 native/jni/src/suggest/core/suggest.cpp | 4 ++++
 1 file changed, 4 insertions(+)

diff --git a/native/jni/src/suggest/core/suggest.cpp b/native/jni/src/suggest/core/suggest.cpp
index 73ccebc..22a2f03 100644
--- a/native/jni/src/suggest/core/suggest.cpp
+++ b/native/jni/src/suggest/core/suggest.cpp
@@ -50,6 +50,10 @@ int Suggest::getSuggestions(ProximityInfo *pInfo, void *traverseSession,
         int *inputXs, int *inputYs, int *times, int *pointerIds, int *inputCodePoints,
         int inputSize, int commitPoint, int *outWords, int *frequencies, int *outputIndices,
         int *outputTypes, int *outputAutoCommitFirstWordConfidence) const {
+    if (!TRAVERSAL || !SCORING || !WEIGHTING) {
+        return 0;
+    }
+
     PROF_OPEN;
     PROF_START(0);
     const float maxSpatialDistance = TRAVERSAL->getMaxSpatialDistance();
-- 
1.8.3.2
